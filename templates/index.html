<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>yt:Spherical Volume Rendering</title>

  <!-- Bootstrap core CSS -->
{% block head %}
<link rel="stylesheet" href="{{url_for('.static', filename='../static/vendor/bootstrap/css/bootstrap.min.css')}}">

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

  <!-- Custom fonts for this template -->
<link rel="stylesheet" href="{{url_for('.static', filename='../static/vendor/fontawesome-free/css/all.min.css')}}">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <!-- Custom styles for this template -->
    <link rel="stylesheet" href="{{url_for('.static', filename='../static/css/clean-blog.min.css')}}">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>


<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"   integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s="   crossorigin="anonymous"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js" integrity="sha384-s1ITto93iSMDxlp/79qhWHi+LsIi9Gx6yL+cOKDuymvihkfol83TYbLbOw+W/wv4" crossorigin="anonymous"></script>
    {% endblock %}
</head>

<body>

  <!-- Page Header -->
  <header class="masthead" style="background-image: url('../static/img/yt_logo.png');">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="site-heading">
            <h1>Spherical Volume Rendering Interface</h1>
            <span class="subheading">A web interface for data exploration and visualization of physical data that comes from non-cartesian grids</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <div class="container">
    <div class="row">
       
       
      <div class="col-lg-8 col-md-10 mx-auto">
         <h2 class="post-title">
              Start drawing
          </h2>
          <br>
         <div class="btn-group btn-group-justified">
  <div class="btn-group">
          <button type="button" id="redButton" onclick="show('red')" class="btn btn-outline-danger active">Red Channel</button>
  </div>
  <div class="btn-group">
          <button type="button" id="greenButton" onclick="show('green')" class="btn btn-outline-success">Green Channel</button>
  </div>
  <div class="btn-group">
              <button type="button" id="blueButton" onclick="show('blue')" class="btn btn-outline-primary">Blue Channel</button></div>
  </div>
</div> 
        

              <div class="col-lg-12 col-md-12 mx-auto" style="height: 500px">

        <div class="post-preview" style="height:500px">
                   
          
            <div id="redChartContainer" style="height: 200px; width: 100%;"></div>
            <div id="greenChartContainer" style="height: 200px; width: 100%; display: none; "></div>
            <div id="blueChartContainer" style="height: 200px; width: 100%; display: none;"></div>

                 
        </div>
      </div>
                    <div class="col-lg-12 mx-auto" >

                        <button class="btn btn-default  float-right" onclick="submit()">Submit</button>

                   <button class="btn btn-default float-right " id="clear">Clear</button>
      </div>
    </div></div>
        
    <!-- Footer -->
  
    <div class="container" id="result" style="display: none; height: 500px">
         <hr>
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
            <h2 class="post-title">
             Color Transfer Function Results
            </h2>
            
        <img class="img-fluid" src="../static/img/result.png" style="height: 300px; width: 100%;">
        </div>
      </div>
    </div>
  <hr>
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <ul class="list-inline text-center">
            <li class="list-inline-item">
              <a href="#">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
        
            <li class="list-inline-item">
              <a href="https://github.com/yt-project">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          </ul>
          <p class="copyright text-muted">Copyright &copy; Your Website 2019</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap core JavaScript -->
    <script rel="text/javascript" href="{{url_for('.static', filename='../static/vendor/jquery/jquery.min.js')}}"></script>
<script rel="text/javascript" href="{{url_for('.static', filename='../static/vendor/bootstrap/js/bootstrap.bundle.min.js')}}"></script>


  <!-- Custom scripts for this template -->
<script type="text/javascript" src="{{url_for('.static', filename='../static/js/script.js')}}"></script>
<script>
    


    
window.onload = function () 
{
    

 data = []
for (i = 1; i < 257; i++) {
    j=0;
    while (j<1) {
      obj = {x:i , y:j}
    //change najat how much increamnt?    
      j= j+0.1;        
      data.push(obj)
    } 
}
  //  console.log(data)
   
    
redChart = new CanvasJS.Chart("redChartContainer",
	{height:460,
		width:1110,

		data: [
		{
			type: 'spline',
			mousemove: onMouseover,
			dataPoints: data,
            color:'transparent',
            markerSize:10,
            cursor: "pointer"
		},
        {
			type: "spline",
			dataPoints: redArray,
            color:'red',
            markerSize:5,
            markerType: "none"
		}
		],
		axisX:{
        title: "titleX",
        titleFontSize:14,
           interval:1,
           labelMaxWidth: 180,           
           labelFontSize: 10,
           labelWrap: true,
           labelAngle: 270,
            minimum: 0,
            maximum: 256,
            interval:5
        },
		axisY:{
        title:"Value",
        titleFontSize:14,
        labelFontSize: 10,
        //change najat how much increamnt?    
        interval: 0.1,
        minimum: 0,
        maximum: 1,
        }
	});
	redChart.render();

greenChart = new CanvasJS.Chart("greenChartContainer",
	{height:460,
     width:1110,

		data: [
		{
			type: 'spline',
			mousemove: onMouseover,
			dataPoints: data,
            color:'transparent',
            markerSize:10,
            cursor: "pointer"
		},
        {
			type: "spline",
			dataPoints: greenArray,
            color:'green',
            markerSize:5,
            markerType: "none"
		}
		],
		axisX:{
        title: "titleX",
        titleFontSize:14,
           interval:1,
           labelMaxWidth: 180,           
           labelFontSize: 10,
           labelWrap: true,
           labelAngle: 270,
            minimum: 0,
            maximum: 256,
            interval:5
        },
		axisY:{
        title:"Value",
        titleFontSize:14,
        labelFontSize: 10,
        //change najat how much increamnt?    
        interval: 0.1,
        minimum: 0,
        maximum: 1,
        }
	});
	greenChart.render();
    
blueChart = new CanvasJS.Chart("blueChartContainer",
	{height:460,
	width:1110,
		data: [
		{
			type: 'spline',
			mousemove: onMouseover,
			dataPoints: data,
            color:'transparent',
            markerSize:10,
            cursor: "pointer"
		},
        {
			type: "spline",
			dataPoints: blueArray,
            color:'blue',
            markerSize:5,
            markerType: "none"
		}
		],
		axisX:{
        title: "titleX",
        titleFontSize:14,
           interval:1,
           labelMaxWidth: 180,           
           labelFontSize: 10,
           labelWrap: true,
           labelAngle: 270,
            minimum: 0,
            maximum: 256,
            interval:5
        },
		axisY:{
        title:"Value",
        titleFontSize:14,
        labelFontSize: 10,
        //change najat how much increamnt?    
        interval: 0.1,
        minimum: 0,
        maximum: 1,
        }
	});
	blueChart.render();
function onMouseover(e) {
        str = {x:e.dataPoint.x , y:e.dataPoint.y}
        if(color== 'red'){
        redArray.push(str)
        redChart.render();}
    else 
        if(color== 'green'){
        greenArray.push(str)
        greenChart.render();}
     if(color== 'blue'){
        blueArray.push(str)
        blueChart.render();}
    }

document.getElementById("clear").addEventListener("click", function(){
       if(color == 'red'){
       redArray = []
       redChart.options.data[1].dataPoints =  redArray
	   redChart.render();}
    else 
     if(color == 'green'){
       greenArray = []
       greenChart.options.data[1].dataPoints = greenArray
	   greenChart.render();}
    else 
     if(color == 'blue'){
       blueArray = []
       blueChart.options.data[1].dataPoints = blueArray
	   blueChart.render();}
    	
    });
}

//variable delcartion
var redChart ;
var greenChart ;
var blueChart ;
redArray = []
greenArray =[]
blueArray = [] 
color = "red"

function show(col){
    console.log(col)
    if(col == 'red'){
     color = 'red' 
    document.getElementById("redChartContainer").style.display = "block";
    document.getElementById("greenChartContainer").style.display = "none";
    document.getElementById("blueChartContainer").style.display = "none";
    
    }
    else
    if(col == 'green'){
     color = 'green' 
    document.getElementById("redChartContainer").style.display = "none";
    document.getElementById("greenChartContainer").style.display = "block";
    document.getElementById("blueChartContainer").style.display = "none";
   // document.getElementById("greenChartContainer").style.height= "200px";
    //document.getElementById("greenChartContainer").style.width= "1110px";
        
    }
    else
    if(col == 'blue'){
     color = 'blue' 
    document.getElementById("redChartContainer").style.display = "none";
    document.getElementById("greenChartContainer").style.display = "none";
    document.getElementById("blueChartContainer").style.display = "block";
    }
}
    
function submit(){
    redValues= new Array(256).fill(0);
    greenValues= new Array(256).fill(0);
    blueValues= new Array(256).fill(0);
    
    console.log(redArray)
    console.log(greenArray)
    console.log(blueArray)
    if(redArray.length == 0)
    { 
     swal({
  icon: 'error',
  title: 'Oops...',
  text: "Please draw the red channel",
  
})}
    else
        if( greenArray.length == 0  )
    { 
     swal({
  icon: 'error',
  title: 'Oops...',
  text: "Please draw the green channel",
  
})}
      else
        if( blueArray.length == 0  )
    { 
     swal({
  icon: 'error',
  title: 'Oops...',
  text: "Please draw the blue channel",
  
})}
    else
    {
    for (ind = 0 ; ind < redArray.length; ind++)    
        { 
        index = redArray[ind]['x']
        value = redArray[ind]['y']
        redValues[index]= value;}
    for (ind = 0 ; ind < greenArray.length; ind++)    
        {
        index = greenArray[ind]['x']
        value = greenArray[ind]['y']
        greenValues[index]= value;}
    for (ind = 0 ; ind < blueArray.length; ind++) {   

        index = blueArray[ind]['x']
        value = blueArray[ind]['y']
        blueValues[index]= value;
        }
   
    
    $.getJSON('/background_process', {
				  redValues: JSON.stringify(redValues),
                  greenValues: JSON.stringify(greenValues),
				  blueValues: JSON.stringify(blueValues),

				}, function(data) {
        // returned from the server
        document.getElementById("result").style.display = "block";
        location.href = "#result";
				  console.log(data.result)
				});}
    
       
    //console.log(redValues)
    //console.log(greenValues)
    //console.log(blueValues)
}    
//end chart
    
   
 
    
  
  
</script>

</body>

</html>
